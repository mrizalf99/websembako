<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toko Sembako Berkah</title>

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        padding-bottom: 130px;
      }

      header {
        background: linear-gradient(135deg, #2e7d32, #66bb6a);
        color: white;
        padding: 20px;
        text-align: center;
      }

      /* PRODUK */
      .container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        padding: 15px;
      }

      @media (min-width: 768px) {
        .container {
          grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        }
      }

      .product {
        background: white;
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .discount {
        position: absolute;
        top: 8px;
        left: 8px;
        background: red;
        color: white;
        font-size: 12px;
        padding: 3px 6px;
        border-radius: 4px;
      }

      .product img {
        width: 100%;
        height: 120px;
        object-fit: contain;
      }

      .old-price {
        text-decoration: line-through;
        color: #999;
        font-size: 12px;
      }

      .new-price {
        font-weight: bold;
        color: #2e7d32;
      }

      button {
        padding: 6px 10px;
        border: none;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
      }

      .add-btn {
        width: 100%;
        background: #25d366;
        color: white;
        margin-top: 6px;
      }

      /* FLOATING CART */
      .cart {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.2);
        padding: 10px;
        z-index: 1000;
      }

      .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 13px;
        margin-bottom: 5px;
      }

      .cart-left {
        flex: 1;
      }

      .cart-controls {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .qty-btn {
        background: #ddd;
        padding: 4px 8px;
      }

      .delete-btn {
        background: red;
        color: white;
        padding: 4px 8px;
      }

      .total {
        font-weight: bold;
        color: #2e7d32;
        margin-top: 5px;
      }

      /* CHECKOUT FORM */
      .checkout-form {
        background: white;
        margin: 20px;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      input,
      select {
        width: 100%;
        padding: 8px;
        margin-top: 8px;
      }
    </style>
  </head>

  <body>
    <header>
      <h2>üõí Toko Sembako Berkah</h2>
      <p>Pilih produk ‚ûú Keranjang ‚ûú Checkout WhatsApp</p>
    </header>

    <!-- PRODUK -->
    <div class="container">
      <div class="product">
        <div class="discount">15%</div>
        <img src="https://via.placeholder.com/200?text=Beras" />
        <h4>Beras 5 Kg</h4>
        <div class="old-price">Rp 75.000</div>
        <div class="new-price">Rp 65.000</div>
        <button class="add-btn" onclick="tambahKeranjang('Beras 5 Kg', 65000)">Tambah</button>
      </div>

      <div class="product">
        <div class="discount">20%</div>
        <img src="https://via.placeholder.com/200?text=Minyak" />
        <h4>Minyak Goreng 1 L</h4>
        <div class="old-price">Rp 19.000</div>
        <div class="new-price">Rp 15.000</div>
        <button class="add-btn" onclick="tambahKeranjang('Minyak Goreng 1 L', 15000)">Tambah</button>
      </div>

      <div class="product">
        <div class="discount">12%</div>
        <img src="https://via.placeholder.com/200?text=Gula" />
        <h4>Gula Pasir 1 Kg</h4>
        <div class="old-price">Rp 16.000</div>
        <div class="new-price">Rp 14.000</div>
        <button class="add-btn" onclick="tambahKeranjang('Gula Pasir 1 Kg', 14000)">Tambah</button>
      </div>
    </div>

    <!-- CHECKOUT FORM -->
    <div id="checkout" class="checkout-form">
      <h3>Data Pembeli</h3>
      <input id="nama" placeholder="Nama Pembeli" />
      <input id="alamat" placeholder="Alamat Pengiriman" />
      <select id="bayar">
        <option value="">Metode Pembayaran</option>
        <option>COD</option>
        <option>Transfer Bank</option>
        <option>QRIS</option>
      </select>
      <button onclick="kirimWA()">Kirim Pesanan</button>
    </div>

    <!-- FLOATING CART -->
    <div class="cart">
      <div id="cartItems"></div>
      <div class="total" id="totalHarga">Total: Rp 0</div>
      <button class="add-btn" onclick="scrollCheckout()">Checkout</button>
    </div>

    <script>
      let keranjang = {};

      function tambahKeranjang(nama, harga) {
        keranjang[nama] ? keranjang[nama].qty++ : (keranjang[nama] = { harga, qty: 1 });
        renderKeranjang();
      }

      function ubahQty(nama, delta) {
        keranjang[nama].qty += delta;
        if (keranjang[nama].qty <= 0) delete keranjang[nama];
        renderKeranjang();
      }

      function hapusItem(nama) {
        delete keranjang[nama];
        renderKeranjang();
      }

      function renderKeranjang() {
        let html = "";
        let total = 0;

        for (let item in keranjang) {
          let sub = keranjang[item].harga * keranjang[item].qty;
          total += sub;

          html += `
        <div class="cart-item">
            <div class="cart-left">
                ${item}<br>Rp ${sub.toLocaleString()}
            </div>
            <div class="cart-controls">
                <button class="qty-btn" onclick="ubahQty('${item}', -1)">‚àí</button>
                ${keranjang[item].qty}
                <button class="qty-btn" onclick="ubahQty('${item}', 1)">+</button>
                <button class="delete-btn" onclick="hapusItem('${item}')">üóëÔ∏è</button>
            </div>
        </div>`;
        }

        document.getElementById("cartItems").innerHTML = html || "Keranjang kosong";
        document.getElementById("totalHarga").innerText = "Total: Rp " + total.toLocaleString();
      }

      function scrollCheckout() {
        if (Object.keys(keranjang).length === 0) {
          alert("Keranjang masih kosong!");
          return;
        }
        document.getElementById("checkout").scrollIntoView({ behavior: "smooth" });
      }

      function kirimWA() {
        let nama = document.getElementById("nama").value;
        let alamat = document.getElementById("alamat").value;
        let bayar = document.getElementById("bayar").value;

        if (!nama || !alamat || !bayar) {
          alert("Lengkapi data pembeli!");
          return;
        }

        let pesan = `NOTA PEMESANAN
Toko Sembako Berkah
------------------------
Nama   : ${nama}
Alamat : ${alamat}
Bayar  : ${bayar}

Pesanan:
`;

        let total = 0;
        for (let item in keranjang) {
          let sub = keranjang[item].harga * keranjang[item].qty;
          total += sub;
          pesan += `- ${item} x ${keranjang[item].qty} = Rp ${sub.toLocaleString()}\n`;
        }

        pesan += `
------------------------
Total: Rp ${total.toLocaleString()}

Terima kasih.`;

        window.open("https://wa.me/6281546068582?text=" + encodeURIComponent(pesan), "_blank");
      }
    </script>
  </body>
</html>
